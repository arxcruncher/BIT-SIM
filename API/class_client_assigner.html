<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ClientAssigner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ClientAssigner Class Reference</h1><!-- doxytag: class="ClientAssigner" -->
<p>Manages the peers in the swarm from the simulators side.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_client_assigner_8h_source.html">ClientAssigner.h</a>&gt;</code></p>

<p><a href="class_client_assigner-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#a0d4dae537b0f05ca918bc3b7333678cb">ClientAssigner</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialises all variables.  <a href="#a0d4dae537b0f05ca918bc3b7333678cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#a053a2e13d54e8c33654cc8ab2911e83f">initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the simulation, must be called before the start of the simulation.  <a href="#a053a2e13d54e8c33654cc8ab2911e83f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#a2a9954b0b83400b4e71972e20ec026e9">peerIsSeeder</a> (int ID, bool seeder)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the <a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> that client with ID is a seeder now.  <a href="#a2a9954b0b83400b4e71972e20ec026e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#acae85263b5a8e08525c8c4b6f6b8897d">peerIsLeaving</a> (const char *peer)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notifies the <a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> that a client is leaving the swarm.  <a href="#acae85263b5a8e08525c8c4b6f6b8897d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#af504cde213d6c3a0f6389eacc695e3bf">getMode</a> (int ID)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Request the state of a client.  <a href="#af504cde213d6c3a0f6389eacc695e3bf"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#a29818449e1c6704d9926cc3c247fe9ae">seeders</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores the amount of seeders in the simualtion.  <a href="#a29818449e1c6704d9926cc3c247fe9ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#adcf6ed7f1354e677dbc651cb3f535823">clients</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores the amount of peers in the simulation.  <a href="#adcf6ed7f1354e677dbc651cb3f535823"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#a7a97638cc92d8a0f134cc9e1d9ecb7e3">maxNumberOfConnections</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores the maximum amount of connections that a client may handle.  <a href="#a7a97638cc92d8a0f134cc9e1d9ecb7e3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#a59f5b1f27004b2a66a7f6d409efdd7d6">seederArray</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer pointing to an array that stores the seeder states of all BTClients.  <a href="#a59f5b1f27004b2a66a7f6d409efdd7d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_b_t_tracker.html">BTTracker</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#ac2782aed7907b4267754281bc2867bc5">tracker</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the <a class="el" href="class_b_t_tracker.html" title="The BTTracker class implements the tracker functionalities.">BTTracker</a> in the simulator.  <a href="#ac2782aed7907b4267754281bc2867bc5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_b_t_client.html">BTClient</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_assigner.html#ae2a7ef71bbf2daf06a44e8f3b33df645">clientArray</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to an array of pointers pointing to every <a class="el" href="class_b_t_client.html" title="The BTClient defines the behaviour of a BitTorrent client.">BTClient</a> in the simualtion.  <a href="#ae2a7ef71bbf2daf06a44e8f3b33df645"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Manages the peers in the swarm from the simulators side. </p>
<p>ClientManager creates and deletes peers in the swarm during the simulation. Connections are created automatically along with the peers.</p>
<dl class="date"><dt><b>Date:</b></dt><dd>2009-03-06 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.2 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Blekinge Institute of Technology TEK-ATS </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0d4dae537b0f05ca918bc3b7333678cb"></a><!-- doxytag: member="ClientAssigner::ClientAssigner" ref="a0d4dae537b0f05ca918bc3b7333678cb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ClientAssigner::ClientAssigner </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialises all variables. </p>

<p>References <a class="el" href="_client_assigner_8h_source.html#l00058">clients</a>, <a class="el" href="_client_assigner_8h_source.html#l00064">maxNumberOfConnections</a>, and <a class="el" href="_client_assigner_8h_source.html#l00054">seeders</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af504cde213d6c3a0f6389eacc695e3bf"></a><!-- doxytag: member="ClientAssigner::getMode" ref="af504cde213d6c3a0f6389eacc695e3bf" args="(int ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ClientAssigner::getMode </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request the state of a client. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ID</em>&nbsp;</td><td>The identifier of the client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The state of client <em>ID</em>. </dd></dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>Client is a seeder </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>1</em>&nbsp;</td><td>Client is a leecher </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>2</em>&nbsp;</td><td>Client not found </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="_client_assigner_8h_source.html#l00058">clients</a>, and <a class="el" href="_client_assigner_8h_source.html#l00068">seederArray</a>.</p>

</div>
</div>
<a class="anchor" id="a053a2e13d54e8c33654cc8ab2911e83f"></a><!-- doxytag: member="ClientAssigner::initialize" ref="a053a2e13d54e8c33654cc8ab2911e83f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientAssigner::initialize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the simulation, must be called before the start of the simulation. </p>
<p>Automagically loads every <a class="el" href="class_b_t_client.html" title="The BTClient defines the behaviour of a BitTorrent client.">BTClient</a> and the <a class="el" href="class_b_t_tracker.html" title="The BTTracker class implements the tracker functionalities.">BTTracker</a>. Assigns leecher/seeder states to the clients. </p>

<p>References <a class="el" href="_client_assigner_8h_source.html#l00077">clientArray</a>, <a class="el" href="_client_assigner_8h_source.html#l00058">clients</a>, <a class="el" href="_client_assigner_8h_source.html#l00064">maxNumberOfConnections</a>, <a class="el" href="_client_assigner_8h_source.html#l00068">seederArray</a>, <a class="el" href="_client_assigner_8h_source.html#l00054">seeders</a>, <a class="el" href="_b_t_tracker_8cc_source.html#l00044">BTTracker::setAmountOfClients()</a>, <a class="el" href="_b_t_client_8cc_source.html#l00071">BTClient::setLeecher()</a>, <a class="el" href="_b_t_client_8cc_source.html#l00065">BTClient::setSeeder()</a>, <a class="el" href="_convert_8h_source.html#l00013">stringify()</a>, and <a class="el" href="_client_assigner_8h_source.html#l00073">tracker</a>.</p>

</div>
</div>
<a class="anchor" id="acae85263b5a8e08525c8c4b6f6b8897d"></a><!-- doxytag: member="ClientAssigner::peerIsLeaving" ref="acae85263b5a8e08525c8c4b6f6b8897d" args="(const char *peer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientAssigner::peerIsLeaving </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>peer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notifies the <a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> that a client is leaving the swarm. </p>
<p>The <a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> then notifies every other module in the swarm to delete the records of that client. This is done for memory optimisation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>peer</em>&nbsp;</td><td>The identifier of the client that is leaving. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="_client_assigner_8h_source.html#l00077">clientArray</a>, <a class="el" href="_client_assigner_8h_source.html#l00058">clients</a>, and <a class="el" href="_b_t_client_8cc_source.html#l00652">BTClient::handlePeerIsGone()</a>.</p>

<p>Referenced by <a class="el" href="_b_t_client_8cc_source.html#l00520">BTClient::handleSelfMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a9954b0b83400b4e71972e20ec026e9"></a><!-- doxytag: member="ClientAssigner::peerIsSeeder" ref="a2a9954b0b83400b4e71972e20ec026e9" args="(int ID, bool seeder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientAssigner::peerIsSeeder </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>seeder</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells the <a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> that client with ID is a seeder now. </p>
<p><a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> keeps track of statistics and terminates the simulation upon seeder domination, hence the <a class="el" href="class_client_assigner.html" title="Manages the peers in the swarm from the simulators side.">ClientAssigner</a> must know that leechers turn into seeders.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ID</em>&nbsp;</td><td>The identifier of the client. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>seeder</em>&nbsp;</td><td>The state of the client, true = seeder, false = leecher. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="_client_assigner_8h_source.html#l00058">clients</a>, and <a class="el" href="_client_assigner_8h_source.html#l00068">seederArray</a>.</p>

<p>Referenced by <a class="el" href="_b_t_client_8cc_source.html#l00666">BTClient::handlePiece()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ae2a7ef71bbf2daf06a44e8f3b33df645"></a><!-- doxytag: member="ClientAssigner::clientArray" ref="ae2a7ef71bbf2daf06a44e8f3b33df645" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_b_t_client.html">BTClient</a>** <a class="el" href="class_client_assigner.html#ae2a7ef71bbf2daf06a44e8f3b33df645">ClientAssigner::clientArray</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to an array of pointers pointing to every <a class="el" href="class_b_t_client.html" title="The BTClient defines the behaviour of a BitTorrent client.">BTClient</a> in the simualtion. </p>

<p>Referenced by <a class="el" href="_client_assigner_8cc_source.html#l00044">initialize()</a>, and <a class="el" href="_client_assigner_8cc_source.html#l00112">peerIsLeaving()</a>.</p>

</div>
</div>
<a class="anchor" id="adcf6ed7f1354e677dbc651cb3f535823"></a><!-- doxytag: member="ClientAssigner::clients" ref="adcf6ed7f1354e677dbc651cb3f535823" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_client_assigner.html#adcf6ed7f1354e677dbc651cb3f535823">ClientAssigner::clients</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores the amount of peers in the simulation. </p>

<p>Referenced by <a class="el" href="_client_assigner_8cc_source.html#l00038">ClientAssigner()</a>, <a class="el" href="_client_assigner_8cc_source.html#l00123">getMode()</a>, <a class="el" href="_client_assigner_8cc_source.html#l00044">initialize()</a>, <a class="el" href="_client_assigner_8cc_source.html#l00112">peerIsLeaving()</a>, and <a class="el" href="_client_assigner_8cc_source.html#l00119">peerIsSeeder()</a>.</p>

</div>
</div>
<a class="anchor" id="a7a97638cc92d8a0f134cc9e1d9ecb7e3"></a><!-- doxytag: member="ClientAssigner::maxNumberOfConnections" ref="a7a97638cc92d8a0f134cc9e1d9ecb7e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_client_assigner.html#a7a97638cc92d8a0f134cc9e1d9ecb7e3">ClientAssigner::maxNumberOfConnections</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores the maximum amount of connections that a client may handle. </p>
<p>This corresponds to the maximum amount of TCP connections a client will maintain. </p>

<p>Referenced by <a class="el" href="_client_assigner_8cc_source.html#l00038">ClientAssigner()</a>, and <a class="el" href="_client_assigner_8cc_source.html#l00044">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a59f5b1f27004b2a66a7f6d409efdd7d6"></a><!-- doxytag: member="ClientAssigner::seederArray" ref="a59f5b1f27004b2a66a7f6d409efdd7d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool* <a class="el" href="class_client_assigner.html#a59f5b1f27004b2a66a7f6d409efdd7d6">ClientAssigner::seederArray</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer pointing to an array that stores the seeder states of all BTClients. </p>

<p>Referenced by <a class="el" href="_client_assigner_8cc_source.html#l00123">getMode()</a>, <a class="el" href="_client_assigner_8cc_source.html#l00044">initialize()</a>, and <a class="el" href="_client_assigner_8cc_source.html#l00119">peerIsSeeder()</a>.</p>

</div>
</div>
<a class="anchor" id="a29818449e1c6704d9926cc3c247fe9ae"></a><!-- doxytag: member="ClientAssigner::seeders" ref="a29818449e1c6704d9926cc3c247fe9ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_client_assigner.html#a29818449e1c6704d9926cc3c247fe9ae">ClientAssigner::seeders</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores the amount of seeders in the simualtion. </p>

<p>Referenced by <a class="el" href="_client_assigner_8cc_source.html#l00038">ClientAssigner()</a>, and <a class="el" href="_client_assigner_8cc_source.html#l00044">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ac2782aed7907b4267754281bc2867bc5"></a><!-- doxytag: member="ClientAssigner::tracker" ref="ac2782aed7907b4267754281bc2867bc5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_b_t_tracker.html">BTTracker</a>* <a class="el" href="class_client_assigner.html#ac2782aed7907b4267754281bc2867bc5">ClientAssigner::tracker</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to the <a class="el" href="class_b_t_tracker.html" title="The BTTracker class implements the tracker functionalities.">BTTracker</a> in the simulator. </p>

<p>Referenced by <a class="el" href="_client_assigner_8cc_source.html#l00044">initialize()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_client_assigner_8h_source.html">ClientAssigner.h</a></li>
<li><a class="el" href="_client_assigner_8cc.html">ClientAssigner.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
